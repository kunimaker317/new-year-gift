<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>New Year Gift</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            background: radial-gradient(circle at center, #1a2a6c, #b21f1f, #fdbb2d); /* –§–æ–Ω–æ–≤—ã–π –≥—Ä–∞–¥–∏–µ–Ω—Ç –∫–∞–∫ –≤ –≤–∏–¥–µ–æ (–ø—Ä–∏–º–µ—Ä–Ω–æ) */
            background: linear-gradient(180deg, #181930 0%, #0d0d15 100%);
            color: white;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            user-select: none;
        }

        .container {
            text-align: center;
            width: 100%;
            transition: all 0.3s ease;
        }

        /* –≠–∫—Ä–∞–Ω 1: –Å–ª–∫–∞ */
        #scene-tree {
            cursor: pointer;
            animation: float 3s ease-in-out infinite;
        }
        .tree-emoji {
            font-size: 150px;
            filter: drop-shadow(0 0 20px rgba(255, 215, 0, 0.5));
        }
        .tap-hint {
            margin-top: 20px;
            opacity: 0.7;
            font-size: 14px;
        }

        /* –≠–∫—Ä–∞–Ω 2: –ö–æ—Ä–æ–±–∫–∏ */
        #scene-gifts {
            display: none; /* –°–∫—Ä—ã—Ç–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é */
            display: flex;
            justify-content: center;
            gap: 20px;
        }
        .gift-box {
            font-size: 60px;
            cursor: pointer;
            transition: transform 0.2s;
        }
        .gift-box:active {
            transform: scale(0.9);
        }

        /* –≠–∫—Ä–∞–Ω 3: –ù–∞–≥—Ä–∞–¥–∞ */
        #scene-reward {
            display: none; /* –°–∫—Ä—ã—Ç–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é */
            flex-direction: column;
            align-items: center;
        }
        .star-icon {
            font-size: 100px;
            margin-bottom: 20px;
            animation: spin 10s linear infinite;
        }
        .reward-title {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 10px;
        }
        .reward-subtitle {
            font-size: 16px;
            opacity: 0.8;
            max-width: 80%;
            line-height: 1.4;
        }

        /* –ê–Ω–∏–º–∞—Ü–∏–∏ */
        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }
        
        @keyframes spin {
            from {transform: rotate(0deg);}
            to {transform: rotate(360deg);}
        }

        .hidden {
            display: none !important;
        }
        
        .visible-flex {
            display: flex !important;
        }

        /* –ö–æ–Ω—Ñ–µ—Ç—Ç–∏ (—É–ø—Ä–æ—â–µ–Ω–Ω–æ CSS —á–∞—Å—Ç–∏—Ü–∞–º–∏) */
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: #f00;
            animation: fall linear forwards;
        }
        @keyframes fall {
            to { transform: translateY(100vh) rotate(720deg); }
        }
    </style>
</head>
<body>

    <!-- –°—Ü–µ–Ω–∞ 1: –Å–ª–∫–∞ -->
    <div id="scene-tree" class="container" onclick="showGifts()">
        <div class="tree-emoji">üéÑ</div>
        <div class="tap-hint">–ù–∞–∂–º–∏, —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å</div>
    </div>

    <!-- –°—Ü–µ–Ω–∞ 2: –ü–æ–¥–∞—Ä–∫–∏ -->
    <div id="scene-gifts" class="container hidden">
        <div class="gift-box" onclick="openGift(this)">üéÅ</div>
        <div class="gift-box" onclick="openGift(this)">üéÅ</div>
        <div class="gift-box" onclick="openGift(this)">üéÅ</div>
    </div>

    <!-- –°—Ü–µ–Ω–∞ 3: –†–µ–∑—É–ª—å—Ç–∞—Ç -->
    <div id="scene-reward" class="container hidden">
        <div class="star-icon">‚≠êÔ∏è</div>
        <div class="reward-title">5000 Telegram Stars</div>
        <div class="reward-subtitle">–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã –ø–æ–ª—É—á–∏–ª–∏ Telegram Stars.<br><small>(–≠—Ç–æ –¥–µ–º–æ-–≤–µ—Ä—Å–∏—è)</small></div>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand(); // –†–∞—Å–∫—Ä—ã—Ç—å –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω

        const treeScene = document.getElementById('scene-tree');
        const giftsScene = document.getElementById('scene-gifts');
        const rewardScene = document.getElementById('scene-reward');

        // –ü–µ—Ä–µ—Ö–æ–¥ –æ—Ç –µ–ª–∫–∏ –∫ –ø–æ–¥–∞—Ä–∫–∞–º
        function showGifts() {
            treeScene.classList.add('hidden');
            giftsScene.classList.remove('hidden');
            giftsScene.classList.add('visible-flex');
            
            // –í–∏–±—Ä–∞—Ü–∏—è (–µ—Å–ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ–º –≤ TG)
            tg.HapticFeedback.impactOccurred('light');
        }

        // –û—Ç–∫—Ä—ã—Ç–∏–µ –ø–æ–¥–∞—Ä–∫–∞
        function openGift(element) {
            // –≠—Ñ—Ñ–µ–∫—Ç –Ω–∞–∂–∞—Ç–∏—è
            tg.HapticFeedback.impactOccurred('heavy');
            
            // –°–∫—Ä—ã–≤–∞–µ–º –ø–æ–¥–∞—Ä–∫–∏
            giftsScene.classList.remove('visible-flex');
            giftsScene.classList.add('hidden');

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω–∞–≥—Ä–∞–¥—É
            rewardScene.classList.remove('hidden');
            rewardScene.classList.add('visible-flex');

            // –ó–∞–ø—É—Å–∫–∞–µ–º –∫–æ–Ω—Ñ–µ—Ç—Ç–∏
            createConfetti();
        }

        // –ü—Ä–æ—Å—Ç–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–Ω—Ñ–µ—Ç—Ç–∏
        function createConfetti() {
            const colors = ['#ff0000', '#00ff00', '#0000ff', '#ffff00', '#ff00ff'];
            for (let i = 0; i < 50; i++) {
                const confetti = document.createElement('div');
                confetti.classList.add('confetti');
                confetti.style.left = Math.random() * 100 + 'vw';
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.animationDuration = (Math.random() * 2 + 2) + 's';
                confetti.style.top = -10 + 'px';
                document.body.appendChild(confetti);
                
                // –£–¥–∞–ª—è–µ–º –∫–æ–Ω—Ñ–µ—Ç—Ç–∏ –ø–æ—Å–ª–µ –∞–Ω–∏–º–∞—Ü–∏–∏
                setTimeout(() => confetti.remove(), 4000);
            }
        }
    </script>
</body>
</html>